<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NanoShell: C:/working/NanoShellOS/include/memory.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NanoShell<span id="projectnumber">&#160;0.20</span>
   </div>
   <div id="projectbrief">a 32-bit multitasked kernel-mode free operating system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('memory_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">memory.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="main_8h_source.html">main.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="multiboot_8h_source.html">multiboot.h</a>&gt;</code><br />
</div>
<p><a href="memory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct____attribute____.html">__attribute__</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_page_table.html">PageTable</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_page_directory.html">PageDirectory</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_heap.html">Heap</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a78cf30a084548c226ac61d0f5c3f1981"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a78cf30a084548c226ac61d0f5c3f1981">BASE_ADDRESS</a>&#160;&#160;&#160;0xC0000000</td></tr>
<tr class="separator:a78cf30a084548c226ac61d0f5c3f1981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac663588bffc3a26f6512e5254959c3b2"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#ac663588bffc3a26f6512e5254959c3b2">PAGE_ENTRIES_PHYS_MAX_SIZE</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ac663588bffc3a26f6512e5254959c3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a239b57a4dd4eae4daa01fc88bb94ee1a"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a239b57a4dd4eae4daa01fc88bb94ee1a">MmAllocateSinglePagePhy</a>(physOut)&#160;&#160;&#160;<a class="el" href="memory_8c.html#aa7262c6c48a4fa45579b28a7b64a53af">MmAllocateSinglePagePhyD</a>(physOut, __FILE__, __LINE__)</td></tr>
<tr class="separator:a239b57a4dd4eae4daa01fc88bb94ee1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e176295cef4cd42ed00f540720a36ed"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a5e176295cef4cd42ed00f540720a36ed">MmAllocateSinglePage</a>()&#160;&#160;&#160;<a class="el" href="memory_8c.html#a32469c50390f884e5a4e9443b45cd85a">MmAllocateSinglePageD</a>(__FILE__, __LINE__)</td></tr>
<tr class="separator:a5e176295cef4cd42ed00f540720a36ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb92a1ad055dbcfff29473b7791270fd"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#acb92a1ad055dbcfff29473b7791270fd">MmAllocate</a>(<a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>)&#160;&#160;&#160;<a class="el" href="memory_8c.html#a04e6632b84729b5b058743e8c3e3ba56">MmAllocateD</a>(<a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>, __FILE__, __LINE__)</td></tr>
<tr class="separator:acb92a1ad055dbcfff29473b7791270fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ab60a832aecaf8fbba0705a13a9ae5"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a06ab60a832aecaf8fbba0705a13a9ae5">AllocateHeap</a>(pHeap,  <a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>)&#160;&#160;&#160;<a class="el" href="memory_8c.html#a47ef21e3c72d7535042ece9c27deffc7">AllocateHeapD</a>(pHeap, <a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>, &quot;[HEAP] &quot; __FILE__, __LINE__)</td></tr>
<tr class="separator:a06ab60a832aecaf8fbba0705a13a9ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1310f5267ca0d526c5d4da2552120a4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a1310f5267ca0d526c5d4da2552120a4d">MmFirstThingEver</a> ()</td></tr>
<tr class="separator:a1310f5267ca0d526c5d4da2552120a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0722d3e3dca8a827b7565cffe38b4ba8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a0722d3e3dca8a827b7565cffe38b4ba8">MmInit</a> (<a class="el" href="multiboot_8h.html#a8cb99862e8314c32c007eee9d2481ae1">multiboot_info_t</a> *)</td></tr>
<tr class="separator:a0722d3e3dca8a827b7565cffe38b4ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7262c6c48a4fa45579b28a7b64a53af"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#aa7262c6c48a4fa45579b28a7b64a53af">MmAllocateSinglePagePhyD</a> (uint32_t *pPhysOut, const char *callFile, int callLine)</td></tr>
<tr class="separator:aa7262c6c48a4fa45579b28a7b64a53af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32469c50390f884e5a4e9443b45cd85a"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a32469c50390f884e5a4e9443b45cd85a">MmAllocateSinglePageD</a> (const char *callFile, int callLine)</td></tr>
<tr class="separator:a32469c50390f884e5a4e9443b45cd85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d0c0ae3efec33049ad5e8119df7b1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#ac5d0c0ae3efec33049ad5e8119df7b1c">MmFreePage</a> (void *pAddr)</td></tr>
<tr class="separator:ac5d0c0ae3efec33049ad5e8119df7b1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e6632b84729b5b058743e8c3e3ba56"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a04e6632b84729b5b058743e8c3e3ba56">MmAllocateD</a> (<a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>, const char *callFile, int callLine)</td></tr>
<tr class="separator:a04e6632b84729b5b058743e8c3e3ba56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee553e83814ce1197fa8e88b6b9a5b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a9ee553e83814ce1197fa8e88b6b9a5b7">MmFree</a> (void *pAddr)</td></tr>
<tr class="separator:a9ee553e83814ce1197fa8e88b6b9a5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5195105c6c5ffcc6b9951d417ace9c73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a5195105c6c5ffcc6b9951d417ace9c73">MmUsePageDirectory</a> (uint32_t *curPageDir, uint32_t phys)</td></tr>
<tr class="separator:a5195105c6c5ffcc6b9951d417ace9c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ae9182bfd3c8ec6d794aa9365283b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a47ae9182bfd3c8ec6d794aa9365283b9">MmTlbInvalidate</a> ()</td></tr>
<tr class="separator:a47ae9182bfd3c8ec6d794aa9365283b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5b53e4063b799eec225017348780a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#aff5b53e4063b799eec225017348780a0">MmRevertToKernelPageDir</a> ()</td></tr>
<tr class="separator:aff5b53e4063b799eec225017348780a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7a497016f986922d99665574f8d43b"><td class="memItemLeft" align="right" valign="top">uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a9f7a497016f986922d99665574f8d43b">MmGetKernelPageDir</a> ()</td></tr>
<tr class="separator:a9f7a497016f986922d99665574f8d43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b7417a859458b0523bfae66e0a0430"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a04b7417a859458b0523bfae66e0a0430">MmGetKernelPageDirP</a> ()</td></tr>
<tr class="separator:a04b7417a859458b0523bfae66e0a0430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d30f6269c9cb9adcb0164a61b2b25c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#af1d30f6269c9cb9adcb0164a61b2b25c">MmDebugDump</a> ()</td></tr>
<tr class="separator:af1d30f6269c9cb9adcb0164a61b2b25c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ef21e3c72d7535042ece9c27deffc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="application_2lib_2include_2nanoshell_8h.html#a0ecf26b576b9a54eca656b9be7ba6a06">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a47ef21e3c72d7535042ece9c27deffc7">AllocateHeapD</a> (<a class="el" href="struct_heap.html">Heap</a> *pHeap, int <a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>, const char *callerFile, int callerLine)</td></tr>
<tr class="separator:a47ef21e3c72d7535042ece9c27deffc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a344df8278e1b36efb0e2591c80583238"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a344df8278e1b36efb0e2591c80583238">GetHeapSize</a> ()</td></tr>
<tr class="separator:a344df8278e1b36efb0e2591c80583238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc14a55c2007d6dd53757ad04c168ba7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#abc14a55c2007d6dd53757ad04c168ba7">GetNumPhysPages</a> ()</td></tr>
<tr class="separator:abc14a55c2007d6dd53757ad04c168ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a880a7944ef2b4ddc33d31813bc355b77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a880a7944ef2b4ddc33d31813bc355b77">GetNumFreePhysPages</a> ()</td></tr>
<tr class="separator:a880a7944ef2b4ddc33d31813bc355b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ca839e01147c59369b2d643466cbb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#aa8ca839e01147c59369b2d643466cbb5">UseHeap</a> (<a class="el" href="struct_heap.html">Heap</a> *pHeap)</td></tr>
<tr class="separator:aa8ca839e01147c59369b2d643466cbb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a940fea7d84f72aafd178e86bfc76e484"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a940fea7d84f72aafd178e86bfc76e484">ResetToKernelHeap</a> ()</td></tr>
<tr class="separator:a940fea7d84f72aafd178e86bfc76e484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad5c95fe28a815bad3f80214276aeb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a3ad5c95fe28a815bad3f80214276aeb9">FreeHeap</a> (<a class="el" href="struct_heap.html">Heap</a> *pHeap)</td></tr>
<tr class="separator:a3ad5c95fe28a815bad3f80214276aeb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a06ab60a832aecaf8fbba0705a13a9ae5" name="a06ab60a832aecaf8fbba0705a13a9ae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ab60a832aecaf8fbba0705a13a9ae5">&#9670;&nbsp;</a></span>AllocateHeap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a> AllocateHeap</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pHeap, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="memory_8c.html#a47ef21e3c72d7535042ece9c27deffc7">AllocateHeapD</a>(pHeap, <a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>, &quot;[HEAP] &quot; __FILE__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a78cf30a084548c226ac61d0f5c3f1981" name="a78cf30a084548c226ac61d0f5c3f1981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78cf30a084548c226ac61d0f5c3f1981">&#9670;&nbsp;</a></span>BASE_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a> BASE_ADDRESS&#160;&#160;&#160;0xC0000000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acb92a1ad055dbcfff29473b7791270fd" name="acb92a1ad055dbcfff29473b7791270fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb92a1ad055dbcfff29473b7791270fd">&#9670;&nbsp;</a></span>MmAllocate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a> MmAllocate</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="memory_8c.html#a04e6632b84729b5b058743e8c3e3ba56">MmAllocateD</a>(<a class="el" href="multiboot_8h.html#af3a788b87c440d5ac4af944345f6e29a">size</a>, __FILE__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5e176295cef4cd42ed00f540720a36ed" name="a5e176295cef4cd42ed00f540720a36ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e176295cef4cd42ed00f540720a36ed">&#9670;&nbsp;</a></span>MmAllocateSinglePage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a> MmAllocateSinglePage</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="memory_8c.html#a32469c50390f884e5a4e9443b45cd85a">MmAllocateSinglePageD</a>(__FILE__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a239b57a4dd4eae4daa01fc88bb94ee1a" name="a239b57a4dd4eae4daa01fc88bb94ee1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a239b57a4dd4eae4daa01fc88bb94ee1a">&#9670;&nbsp;</a></span>MmAllocateSinglePagePhy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a> MmAllocateSinglePagePhy</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">physOut</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="memory_8c.html#aa7262c6c48a4fa45579b28a7b64a53af">MmAllocateSinglePagePhyD</a>(physOut, __FILE__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac663588bffc3a26f6512e5254959c3b2" name="ac663588bffc3a26f6512e5254959c3b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac663588bffc3a26f6512e5254959c3b2">&#9670;&nbsp;</a></span>PAGE_ENTRIES_PHYS_MAX_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="avx512fintrin_8h.html#a1b7950c88593de42a92cc8558f5488f6">define</a> PAGE_ENTRIES_PHYS_MAX_SIZE&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a47ef21e3c72d7535042ece9c27deffc7" name="a47ef21e3c72d7535042ece9c27deffc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ef21e3c72d7535042ece9c27deffc7">&#9670;&nbsp;</a></span>AllocateHeapD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="application_2lib_2include_2nanoshell_8h.html#a0ecf26b576b9a54eca656b9be7ba6a06">bool</a> AllocateHeapD </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_heap.html">Heap</a> *&#160;</td>
          <td class="paramname"><em>pHeap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callerFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>callerLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Creates a new heap. You can also allocate this heap on the stack, it's not a problem. </p>

</div>
</div>
<a id="a3ad5c95fe28a815bad3f80214276aeb9" name="a3ad5c95fe28a815bad3f80214276aeb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad5c95fe28a815bad3f80214276aeb9">&#9670;&nbsp;</a></span>FreeHeap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FreeHeap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_heap.html">Heap</a> *&#160;</td>
          <td class="paramname"><em>pHeap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Gets rid of a heap. Does not delete the pointer, but it deinitializes the heap within. </p>

</div>
</div>
<a id="a344df8278e1b36efb0e2591c80583238" name="a344df8278e1b36efb0e2591c80583238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a344df8278e1b36efb0e2591c80583238">&#9670;&nbsp;</a></span>GetHeapSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GetHeapSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Get how many pages we can allocate on this heap.</p>
<p ><a class="el" href="struct_heap.html">Heap</a> management code. What comes after 0x80000000 is always mapped regardless of which user heap we're currently using - it's just that we can't allocate to the kernel heap while we are using the user heap. </p>

</div>
</div>
<a id="a880a7944ef2b4ddc33d31813bc355b77" name="a880a7944ef2b4ddc33d31813bc355b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a880a7944ef2b4ddc33d31813bc355b77">&#9670;&nbsp;</a></span>GetNumFreePhysPages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GetNumFreePhysPages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Get total number of free allocatable pages. </p>

</div>
</div>
<a id="abc14a55c2007d6dd53757ad04c168ba7" name="abc14a55c2007d6dd53757ad04c168ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc14a55c2007d6dd53757ad04c168ba7">&#9670;&nbsp;</a></span>GetNumPhysPages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GetNumPhysPages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Get total number of allocatable pages. </p>

</div>
</div>
<a id="a04e6632b84729b5b058743e8c3e3ba56" name="a04e6632b84729b5b058743e8c3e3ba56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e6632b84729b5b058743e8c3e3ba56">&#9670;&nbsp;</a></span>MmAllocateD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * MmAllocateD </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>callLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Allocates a memory range of size <code>size</code>. Actually allocates several pages' worth of memory, so that the <code>size</code> always fits inside.</p>
<p >For example, <a class="el" href="memory_8h.html#acb92a1ad055dbcfff29473b7791270fd">MmAllocate(8000)</a> behaves exactly the same as <a class="el" href="memory_8h.html#acb92a1ad055dbcfff29473b7791270fd">MmAllocate(4193)</a> and <a class="el" href="memory_8h.html#acb92a1ad055dbcfff29473b7791270fd">MmAllocate(8192)</a>.</p>
<p >This kind of thing where we're allocating 1 byte's worth of memory but using several is not recommended, because the specification can always change this later so that memory accesses beyond the size throw an error.</p>
<p >This returns the starting address of the memory range we obtained. NULL can also be returned, if we have no more address space to actually allocate anything, or there are no more memory ranges available.</p>
<p >You must call MmFree with the <em>EXACT</em> address MmAllocate returned.</p>
<p >See: MmFree </p>

</div>
</div>
<a id="a32469c50390f884e5a4e9443b45cd85a" name="a32469c50390f884e5a4e9443b45cd85a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32469c50390f884e5a4e9443b45cd85a">&#9670;&nbsp;</a></span>MmAllocateSinglePageD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * MmAllocateSinglePageD </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>callLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Allocates a single page (4096 bytes).</p>
<p >This returns the address of the new page, or NULL if we ran out of memory. Use MmAllocateSinglePagePhy if you also want the physical address of the page. </p>

</div>
</div>
<a id="aa7262c6c48a4fa45579b28a7b64a53af" name="aa7262c6c48a4fa45579b28a7b64a53af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7262c6c48a4fa45579b28a7b64a53af">&#9670;&nbsp;</a></span>MmAllocateSinglePagePhyD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * MmAllocateSinglePagePhyD </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pPhysOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>callLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Allocates a single page (4096 bytes).</p>
<p >This returns the address of the new page, or NULL if we ran out of memory. pPhysOut may be NULL or not, in the case where it's not, the physical address of the page is returned. </p>

</div>
</div>
<a id="af1d30f6269c9cb9adcb0164a61b2b25c" name="af1d30f6269c9cb9adcb0164a61b2b25c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d30f6269c9cb9adcb0164a61b2b25c">&#9670;&nbsp;</a></span>MmDebugDump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmDebugDump </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Dumps all information about the memory manager to the console. Useful for debugging </p>

</div>
</div>
<a id="a1310f5267ca0d526c5d4da2552120a4d" name="a1310f5267ca0d526c5d4da2552120a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1310f5267ca0d526c5d4da2552120a4d">&#9670;&nbsp;</a></span>MmFirstThingEver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmFirstThingEver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ee553e83814ce1197fa8e88b6b9a5b7" name="a9ee553e83814ce1197fa8e88b6b9a5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee553e83814ce1197fa8e88b6b9a5b7">&#9670;&nbsp;</a></span>MmFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmFree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Frees a memory range allocated with MmAllocate. A NULL pointer is carefully ignored.</p>
<p >Note that the last 12 bits of pAddr are ignored, but the other 20 bits MUST represent the first page.</p>
<p >So for example MmFree(MmAllocate(400)) behaves exactly the same as MmFree(<a class="el" href="memory_8h.html#acb92a1ad055dbcfff29473b7791270fd">MmAllocate(400)</a>+500), but not as MmFree(<a class="el" href="memory_8h.html#acb92a1ad055dbcfff29473b7791270fd">MmAllocate(400)</a>+4100). </p>

</div>
</div>
<a id="ac5d0c0ae3efec33049ad5e8119df7b1c" name="ac5d0c0ae3efec33049ad5e8119df7b1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d0c0ae3efec33049ad5e8119df7b1c">&#9670;&nbsp;</a></span>MmFreePage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmFreePage </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Frees a single memory page. A NULL pointer is carefully ignored. </p>

</div>
</div>
<a id="a9f7a497016f986922d99665574f8d43b" name="a9f7a497016f986922d99665574f8d43b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7a497016f986922d99665574f8d43b">&#9670;&nbsp;</a></span>MmGetKernelPageDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t * MmGetKernelPageDir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Gets the kernel's default page directory's virtual address. </p>

</div>
</div>
<a id="a04b7417a859458b0523bfae66e0a0430" name="a04b7417a859458b0523bfae66e0a0430"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04b7417a859458b0523bfae66e0a0430">&#9670;&nbsp;</a></span>MmGetKernelPageDirP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MmGetKernelPageDirP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Gets the kernel's default page directory's physical address. </p>

</div>
</div>
<a id="a0722d3e3dca8a827b7565cffe38b4ba8" name="a0722d3e3dca8a827b7565cffe38b4ba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0722d3e3dca8a827b7565cffe38b4ba8">&#9670;&nbsp;</a></span>MmInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="multiboot_8h.html#a8cb99862e8314c32c007eee9d2481ae1">multiboot_info_t</a> *&#160;</td>
          <td class="paramname"><em>pInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initializes the memory manager and heap. </p>

</div>
</div>
<a id="aff5b53e4063b799eec225017348780a0" name="aff5b53e4063b799eec225017348780a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff5b53e4063b799eec225017348780a0">&#9670;&nbsp;</a></span>MmRevertToKernelPageDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmRevertToKernelPageDir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reverts to the kernel's default page directory. Useful if you're returning from an ELF executable. </p>

</div>
</div>
<a id="a47ae9182bfd3c8ec6d794aa9365283b9" name="a47ae9182bfd3c8ec6d794aa9365283b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ae9182bfd3c8ec6d794aa9365283b9">&#9670;&nbsp;</a></span>MmTlbInvalidate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmTlbInvalidate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reloads CR3, invalidating the TLB. </p>

</div>
</div>
<a id="a5195105c6c5ffcc6b9951d417ace9c73" name="a5195105c6c5ffcc6b9951d417ace9c73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5195105c6c5ffcc6b9951d417ace9c73">&#9670;&nbsp;</a></span>MmUsePageDirectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MmUsePageDirectory </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>curPageDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>phys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Uses a certain page directory address (and its physical one) as the current page directory.</p>
<p >This is an <em>internal</em> kernel function and should not be used by any non-memory code. </p>

</div>
</div>
<a id="a940fea7d84f72aafd178e86bfc76e484" name="a940fea7d84f72aafd178e86bfc76e484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a940fea7d84f72aafd178e86bfc76e484">&#9670;&nbsp;</a></span>ResetToKernelHeap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ResetToKernelHeap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Revert back to kernel heap. Need to do this if you want to get rid of the heap. </p>

</div>
</div>
<a id="aa8ca839e01147c59369b2d643466cbb5" name="aa8ca839e01147c59369b2d643466cbb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8ca839e01147c59369b2d643466cbb5">&#9670;&nbsp;</a></span>UseHeap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UseHeap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_heap.html">Heap</a> *&#160;</td>
          <td class="paramname"><em>pHeap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Use this heap pointer as our heap. <br  />
 </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="memory_8h.html">memory.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
